"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[69444],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||o;return n?a.createElement(k,i(i({ref:t},d),{},{components:n})):a.createElement(k,i({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},31152:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>N,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const o={id:"useForm",title:"useForm"},i=void 0,l={unversionedId:"api-reference/antd/hooks/form/useForm",id:"api-reference/antd/hooks/form/useForm",title:"useForm",description:"useForm is used to manage forms. It returns the necessary properties and methods to control the Antd Form. Also, it has been developed by using useForm imported from @pankod/refine-core package.",source:"@site/docs/api-reference/antd/hooks/form/useForm.md",sourceDirName:"api-reference/antd/hooks/form",slug:"/api-reference/antd/hooks/form/useForm",permalink:"/docs/api-reference/antd/hooks/form/useForm",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/master/documentation/docs/api-reference/antd/hooks/form/useForm.md",tags:[],version:"current",lastUpdatedBy:"\xd6mer Faruk APLAK",lastUpdatedAt:1674038087,formattedLastUpdatedAt:"Jan 18, 2023",frontMatter:{id:"useForm",title:"useForm"},sidebar:"someSidebar",previous:{title:"useDrawerForm",permalink:"/docs/api-reference/antd/hooks/form/useDrawerForm"},next:{title:"useModalForm",permalink:"/docs/api-reference/antd/hooks/form/useModalForm"}},s={},p=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2},{value:"<code>action</code>",id:"action",level:3},{value:"<code>resource</code>",id:"resource",level:3},{value:"<code>id</code>",id:"id",level:3},{value:"<code>redirect</code>",id:"redirect",level:3},{value:"<code>onMutationSuccess</code>",id:"onmutationsuccess",level:3},{value:"<code>onMutationError</code>",id:"onmutationerror",level:3},{value:"<code>invalidates</code>",id:"invalidates",level:3},{value:"<code>dataProviderName</code>",id:"dataprovidername",level:3},{value:"<code>mutationMode</code>",id:"mutationmode",level:3},{value:"<code>successNotification</code>",id:"successnotification",level:3},{value:"<code>errorNotification</code>",id:"errornotification",level:3},{value:"<code>metaData</code>",id:"metadata",level:3},{value:"<code>queryOptions</code>",id:"queryoptions",level:3},{value:"<code>createMutationOptions</code>",id:"createmutationoptions",level:3},{value:"<code>updateMutationOptions</code>",id:"updatemutationoptions",level:3},{value:"<code>warnWhenUnsavedChanges</code>",id:"warnwhenunsavedchanges",level:3},{value:"<code>submitOnEnter</code>",id:"submitonenter",level:3},{value:"<code>liveMode</code>",id:"livemode",level:3},{value:"<code>onLiveEvent</code>",id:"onliveevent",level:3},{value:"<code>liveParams</code>",id:"liveparams",level:3},{value:"Return Values",id:"return-values",level:2},{value:"<code>form</code>",id:"form",level:3},{value:"<code>formProps</code>",id:"formprops",level:3},{value:"<code>onFinish</code>",id:"onfinish",level:4},{value:"<code>onValuesChange</code>",id:"onvalueschange",level:4},{value:"<code>onKeyUp</code>",id:"onkeyup",level:4},{value:"<code>initialValues</code>",id:"initialvalues",level:4},{value:"<code>formLoading</code>",id:"formloading",level:3},{value:"<code>queryResult</code>",id:"queryresult",level:3},{value:"<code>mutationResult</code>",id:"mutationresult",level:3},{value:"<code>setId</code>",id:"setid",level:3},{value:"<code>redirect</code>",id:"redirect-1",level:3},{value:"<code>onFinish</code>",id:"onfinish-1",level:3},{value:"FAQ",id:"faq",level:2},{value:"How can Invalidate other resources?",id:"how-can-invalidate-other-resources",level:3},{value:"How can I change the form data before submitting it to the API?",id:"how-can-i-change-the-form-data-before-submitting-it-to-the-api",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Properties",id:"properties-1",level:3},{value:"Return values",id:"return-values-1",level:3},{value:"Type Parameters",id:"type-parameters",level:3},{value:"Example",id:"example",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},m=d("GeneralConceptsLink"),u=d("Tabs"),c=d("TabItem"),k=d("PropsTable"),h=d("CodeSandboxExample"),f={toc:p};function N(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live shared",live:!0,shared:!0},'import {\n    Table as AntdTable,\n    Edit as AntdEdit,\n    Create as AntdCreate,\n    List as AntdList,\n    Form as AntdForm,\n    Input as AntdInput,\n    useForm as useAntdForm,\n    useTable as useAntdTable,\n    Space as AntdSpace,\n    EditButton as AntdEditButton,\n    CloneButton as AntdCloneButton,\n} from "@pankod/refine-antd";\n\ninterface IPost {\n    id: number;\n    title: string;\n    content: string;\n}\n\nconst PostList = () => {\n    const { tableProps } = useAntdTable();\n\n    return (\n        <AntdList>\n            <AntdTable {...tableProps} rowKey="id">\n                <AntdTable.Column dataIndex="id" title="ID" />\n                <AntdTable.Column dataIndex="title" title="Title" />\n                <AntdTable.Column\n                    title="Actions"\n                    dataIndex="actions"\n                    render={(_, record) => (\n                        <AntdSpace>\n                            <AntdEditButton\n                                hideText\n                                size="small"\n                                recordItemId={record.id}\n                            />\n                            <AntdCloneButton\n                                hideText\n                                size="small"\n                                recordItemId={record.id}\n                            />\n                        </AntdSpace>\n                    )}\n                />\n            </AntdTable>\n        </AntdList>\n    );\n};\n\nconst PostEdit = () => {\n    const { formProps, saveButtonProps } = useAntdForm();\n\n    return (\n        <AntdEdit saveButtonProps={saveButtonProps}>\n            <AntdForm {...formProps} layout="vertical">\n                <AntdForm.Item\n                    label="Title"\n                    name="title"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <AntdInput />\n                </AntdForm.Item>\n                <AntdForm.Item\n                    label="Content"\n                    name="content"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <AntdInput.TextArea />\n                </AntdForm.Item>\n            </AntdForm>\n        </AntdEdit>\n    );\n};\n\nconst PostCreate = () => {\n    const { formProps, saveButtonProps } = useAntdForm();\n\n    return (\n        <AntdCreate saveButtonProps={saveButtonProps}>\n            <AntdForm {...formProps} layout="vertical">\n                <AntdForm.Item\n                    label="Title"\n                    name="title"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <AntdInput />\n                </AntdForm.Item>\n                <AntdForm.Item\n                    label="Content"\n                    name="content"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <AntdInput.TextArea />\n                </AntdForm.Item>\n            </AntdForm>\n        </AntdCreate>\n    );\n};\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," is used to manage forms. It returns the necessary properties and methods to control the ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form/"},"Antd Form"),". Also, it has been developed by using ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/useForm/"},(0,r.kt)("inlineCode",{parentName:"a"},"useForm"))," imported from ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/refinedev/refine/tree/next/packages/core"},"@pankod/refine-core")," package."),(0,r.kt)(m,{mdxType:"GeneralConceptsLink"}),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For more detailed usage examples please refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form/"},"Ant Design Form")," documentation.")),(0,r.kt)("p",null,"We'll show the basic usage of ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," by adding an editing form."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/posts/edit.tsx"',title:'"pages/posts/edit.tsx"'},'// highlight-next-line\nimport { Edit, Form, Input, useForm, Select } from "@pankod/refine-antd";\n\nexport const PostEdit: React.FC = () => {\n    // highlight-next-line\n    const { formProps, saveButtonProps } = useForm<IPost>();\n\n    return (\n        // highlight-next-line\n        <Edit saveButtonProps={saveButtonProps}>\n            // highlight-next-line\n            <Form {...formProps} layout="vertical">\n                <Form.Item label="Title" name="title">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Status" name="status">\n                    <Select\n                        options={[\n                            {\n                                label: "Published",\n                                value: "published",\n                            },\n                            {\n                                label: "Draft",\n                                value: "draft",\n                            },\n                            {\n                                label: "Rejected",\n                                value: "rejected",\n                            },\n                        ]}\n                    />\n                </Form.Item>\n            </Form>\n        </Edit>\n    );\n};\n\ninterface IPost {\n    id: number;\n    title: string;\n    status: "published" | "draft" | "rejected";\n}\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"formProps")," includes all necessary values to manage Ant Design ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form/"},"Form")," components."),(0,r.kt)("p",null,"In the example if you navigate to ",(0,r.kt)("inlineCode",{parentName:"p"},"/posts/edit/1234")," it will manage the data of the post with id of ",(0,r.kt)("inlineCode",{parentName:"p"},"1234")," in an editing context. See ",(0,r.kt)("a",{parentName:"p",href:"#actions"},"Actions")," on how ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," determines this is an editing context."),(0,r.kt)("p",null,"Since this is an edit form it will fill the form with the data of the post with id of ",(0,r.kt)("inlineCode",{parentName:"p"},"1234")," and then the form will be ready to edit further and submit the changes."),(0,r.kt)("p",null,"Submit functionality is provided by ",(0,r.kt)("inlineCode",{parentName:"p"},"saveButtonProps")," which includes all of the necessary props for a button to submit a form including automatically updating loading states."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," accepts type parameters for the record in use and for the response type of the mutation. ",(0,r.kt)("inlineCode",{parentName:"p"},"IPost")," in the example represents the record to edit. It is also used as the default type for mutation response."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you want to show a form in a modal or drawer where necessary route params might not be there you can use the ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/antd/hooks/form/useModalForm"},"useModalForm")," or the ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/antd/hooks/form/useDrawerForm"},"useDrawerForm")," hook.")),(0,r.kt)("h2",{id:"properties"},"Properties"),(0,r.kt)("h3",{id:"action"},(0,r.kt)("inlineCode",{parentName:"h3"},"action")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," can handle ",(0,r.kt)("inlineCode",{parentName:"p"},"edit"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"clone")," actions."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"By default, it determines the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," from route."),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"If the route is ",(0,r.kt)("inlineCode",{parentName:"li"},"/posts/create")," thus the hook will be called with ",(0,r.kt)("inlineCode",{parentName:"li"},'action: "create"'),"."),(0,r.kt)("li",{parentName:"ul"},"If the route is ",(0,r.kt)("inlineCode",{parentName:"li"},"/posts/edit/1"),", the hook will be called with ",(0,r.kt)("inlineCode",{parentName:"li"},'action: "edit"'),"."),(0,r.kt)("li",{parentName:"ul"},"If the route is ",(0,r.kt)("inlineCode",{parentName:"li"},"/posts/clone/1"),", the hook will be called with ",(0,r.kt)("inlineCode",{parentName:"li"},'action: "clone"'),". To display form, uses ",(0,r.kt)("inlineCode",{parentName:"li"},"create")," component from resource.")),(0,r.kt)("p",{parentName:"admonition"},"It can be overridden by passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," prop where it isn't possible to determine the action from the route (e.g. when using form in a modal or using a custom route).")),(0,r.kt)(u,{defaultValue:"create",values:[{label:"create",value:"create"},{label:"edit",value:"edit"},{label:"clone",value:"clone"}],mdxType:"Tabs"},(0,r.kt)(c,{value:"create",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'action: "create"')," is used for creating a new record that didn't exist before."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," uses ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useCreate"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate"))," under the hood for mutations on create mode."),(0,r.kt)("p",null,"In the following example, we'll show how to use ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," with ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "create"'),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live url=http://localhost:3000/posts/create previewHeight=420px",live:!0,url:"http://localhost:3000/posts/create",previewHeight:"420px"},'setInitialRoutes(["/posts/create"]);\n\n// visible-block-start\nimport React from "react";\nimport { IResourceComponentsProps } from "@pankod/refine-core";\n\nimport { Create, Form, Input, useForm } from "@pankod/refine-antd";\n\ninterface IPost {\n    id: number;\n    title: string;\n    content: string;\n}\n\nconst PostCreatePage: React.FC<IResourceComponentsProps> = () => {\n    const { formProps, saveButtonProps } = useForm<IPost>();\n\n    return (\n        <Create saveButtonProps={saveButtonProps}>\n            <Form {...formProps} layout="vertical">\n                <Form.Item\n                    label="Title"\n                    name="title"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label="Content"\n                    name="content"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input.TextArea />\n                </Form.Item>\n            </Form>\n        </Create>\n    );\n};\n// visible-block-end\n\nsetRefineProps({\n    resources: [\n        {\n            name: "posts",\n            list: PostList,\n            create: PostCreatePage,\n            edit: PostEdit,\n        },\n    ],\n});\n\nrender(<RefineAntdDemo />);\n'))),(0,r.kt)(c,{value:"edit",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'action: "edit"')," is used for editing an existing record. It requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," for determining the record to edit. By default, it uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from the route. It can be changed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"setId")," function or ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property."),(0,r.kt)("p",null,"It fetches the record data according to the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," with ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useOne/"},(0,r.kt)("inlineCode",{parentName:"a"},"useOne"))," and returns the ",(0,r.kt)("inlineCode",{parentName:"p"},"queryResult")," for you to fill the form. After the form is submitted, it updates the record with ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useUpdate"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate")),"."),(0,r.kt)("p",null,"In the following example, we'll show how to use ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," with ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "edit"'),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live url=http://localhost:3000/edit/123 previewHeight=420px",live:!0,url:"http://localhost:3000/edit/123",previewHeight:"420px"},'setInitialRoutes(["/posts/edit/123"]);\n\n// visible-block-start\nimport React from "react";\nimport { IResourceComponentsProps } from "@pankod/refine-core";\n\nimport { Edit, Form, Input, useForm } from "@pankod/refine-antd";\n\ninterface IPost {\n    id: number;\n    title: string;\n    content: string;\n}\n\nconst PostEditPage: React.FC<IResourceComponentsProps> = () => {\n    const { formProps, saveButtonProps } = useForm<IPost>();\n\n    return (\n        <Edit saveButtonProps={saveButtonProps}>\n            <Form {...formProps} layout="vertical">\n                <Form.Item\n                    label="Title"\n                    name="title"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label="Content"\n                    name="content"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input.TextArea />\n                </Form.Item>\n            </Form>\n        </Edit>\n    );\n};\n// visible-block-end\n\nsetRefineProps({\n    resources: [\n        {\n            name: "posts",\n            list: PostList,\n            create: PostCreate,\n            edit: PostEditPage,\n        },\n    ],\n});\n\nrender(<RefineAntdDemo />);\n'))),(0,r.kt)(c,{value:"clone",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'action: "clone"')," is used for cloning an existing record. It requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," for determining the record to clone. By default, it uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from the route. It can be changed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"setId")," function."),(0,r.kt)("p",null,"You can think ",(0,r.kt)("inlineCode",{parentName:"p"},"action:clone")," like save as. It's similar to ",(0,r.kt)("inlineCode",{parentName:"p"},"action:edit")," but it creates a new record instead of updating the existing one."),(0,r.kt)("p",null,"It fetches the record data according to the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," with ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useOne/"},(0,r.kt)("inlineCode",{parentName:"a"},"useOne"))," and returns the ",(0,r.kt)("inlineCode",{parentName:"p"},"queryResult")," for you to fill the form. After the form is submitted, it creates a new record with ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useCreate"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live url=http://localhost:3000/clone/123 previewHeight=420px",live:!0,url:"http://localhost:3000/clone/123",previewHeight:"420px"},'setInitialRoutes(["/posts/clone/123"]);\n\n// visible-block-start\nimport React from "react";\nimport { IResourceComponentsProps } from "@pankod/refine-core";\n\nimport {\n    Create,\n    Form,\n    Input,\n    useForm,\n    Space,\n    Switch,\n} from "@pankod/refine-antd";\n\ninterface IPost {\n    id: number;\n    title: string;\n    content: string;\n}\n\nconst PostCreatePage: React.FC<IResourceComponentsProps> = () => {\n    const { formProps, saveButtonProps } = useForm<IPost>();\n\n    return (\n        <Create saveButtonProps={saveButtonProps}>\n            <Form {...formProps} layout="vertical">\n                <Form.Item\n                    label="Title"\n                    name="title"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label="Content"\n                    name="content"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input.TextArea />\n                </Form.Item>\n            </Form>\n        </Create>\n    );\n};\n// visible-block-end\n\nsetRefineProps({\n    resources: [\n        {\n            name: "posts",\n            list: PostList,\n            create: PostCreatePage,\n            edit: PostEdit,\n        },\n    ],\n});\n\nrender(<RefineAntdDemo />);\n')))),(0,r.kt)("h3",{id:"resource"},(0,r.kt)("inlineCode",{parentName:"h3"},"resource")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," passes the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider")," as a params. This parameter is usually used to as a API endpoint path. It all depends on how to handle the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," in your ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider"),". See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/data-provider#creating-a-data-provider"},(0,r.kt)("inlineCode",{parentName:"a"},"creating a data provider"))," section for an example of how ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," are handled."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," value is determined from the active route where the component or the hook is used. It can be overridden by passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," prop."),(0,r.kt)("p",null,"Use case for overriding the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," prop:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We can create a ",(0,r.kt)("inlineCode",{parentName:"li"},"category")," from the ",(0,r.kt)("inlineCode",{parentName:"li"},"<PostEdit>")," page."),(0,r.kt)("li",{parentName:"ul"},"We can edit a ",(0,r.kt)("inlineCode",{parentName:"li"},"category")," from the ",(0,r.kt)("inlineCode",{parentName:"li"},"<PostEdit>")," page.")),(0,r.kt)("p",null,"In the following example, we'll show how to use ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," prop."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},'import { Edit, Form, Input, useForm } from "@pankod/refine-antd";\nimport { PostForm } from "./PostForm";\n\nconst PostEdit = () => {\n    return (\n        <div>\n            <PostForm />\n            <CategoryForm />\n        </div>\n    );\n};\n\nconst CategoryForm = () => {\n    const { formProps, saveButtonProps } = useForm({\n        action: "create",\n        resource: "categories",\n    });\n\n    return (\n        <Edit saveButtonProps={saveButtonProps}>\n            <Form {...formProps} layout="vertical">\n                <Form.Item label="Title" name="title">\n                    <Input />\n                </Form.Item>\n            </Form>\n        </Edit>\n    );\n};\n')),(0,r.kt)("p",null,"Also you can give URL path to the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," prop."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const form = useForm({\n    action: "create",\n    resource: "categories/subcategory", // <BASE_URL_FROM_DATA_PROVIDER>/categories/subcategory\n});\n')),(0,r.kt)("h3",{id:"id"},(0,r.kt)("inlineCode",{parentName:"h3"},"id")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"id")," is used for determining the record to ",(0,r.kt)("inlineCode",{parentName:"p"},"edit")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"clone"),". By default, it uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from the route. It can be changed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"setId")," function or ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property."),(0,r.kt)("p",null,"It is usefull when you want to ",(0,r.kt)("inlineCode",{parentName:"p"},"edit")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"clone")," a ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," from a different page."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," is required when ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "edit"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "clone"'),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const form = useForm({\n    action: "edit", // or clone\n    resource: "categories",\n    id: 1, // <BASE_URL_FROM_DATA_PROVIDER>/categories/1\n});\n')),(0,r.kt)("h3",{id:"redirect"},(0,r.kt)("inlineCode",{parentName:"h3"},"redirect")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"redirect")," is used for determining the page to redirect after the form is submitted. By default, it uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"list"),". It can be changed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect")," property."),(0,r.kt)("p",null,"It can be set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"show" | "edit" | "list" | "create"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," to prevent the page from redirecting to the list page after the form is submitted."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    redirect: false,\n});\n")),(0,r.kt)("h3",{id:"onmutationsuccess"},(0,r.kt)("inlineCode",{parentName:"h3"},"onMutationSuccess")),(0,r.kt)("p",null,"It's a callback function that will be called after the mutation is successful."),(0,r.kt)("p",null,"It receives the following parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),": Returned value from ",(0,r.kt)("a",{parentName:"li",href:"/docs/api-reference/core/hooks/data/useCreate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate"))," or ",(0,r.kt)("a",{parentName:"li",href:"/docs/api-reference/core/hooks/data/useUpdate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate"))," depending on the ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"variables"),": The variables passed to the mutation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"context"),": react-query context.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    onMutationSuccess: (data, variables, context) => {\n        console.log({ data, variables, context });\n    },\n});\n")),(0,r.kt)("h3",{id:"onmutationerror"},(0,r.kt)("inlineCode",{parentName:"h3"},"onMutationError")),(0,r.kt)("p",null,"It's a callback function that will be called after the mutation is failed."),(0,r.kt)("p",null,"It receives the following parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),": Returned value from ",(0,r.kt)("a",{parentName:"li",href:"/docs/api-reference/core/hooks/data/useCreate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate"))," or ",(0,r.kt)("a",{parentName:"li",href:"/docs/api-reference/core/hooks/data/useUpdate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate"))," depending on the ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"variables"),": The variables passed to the mutation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"context"),": react-query context.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    onMutationError: (data, variables, context) => {\n        console.log({ data, variables, context });\n    },\n});\n")),(0,r.kt)("h3",{id:"invalidates"},(0,r.kt)("inlineCode",{parentName:"h3"},"invalidates")),(0,r.kt)("p",null,"You can use it to manage the invalidations that will occur at the end of the mutation."),(0,r.kt)("p",null,"By default it's invalidates following queries from the current ",(0,r.kt)("inlineCode",{parentName:"p"},"resource"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"on ",(0,r.kt)("inlineCode",{parentName:"li"},"create")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"clone")," mode: ",(0,r.kt)("inlineCode",{parentName:"li"},'"list"')," and ",(0,r.kt)("inlineCode",{parentName:"li"},'"many"')),(0,r.kt)("li",{parentName:"ul"},"on ",(0,r.kt)("inlineCode",{parentName:"li"},"edit")," mode: ",(0,r.kt)("inlineCode",{parentName:"li"},'"list"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"many"')," and ",(0,r.kt)("inlineCode",{parentName:"li"},'"detail"'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},'const form = useForm({\n    invalidates: ["list", "many", "detail"],\n});\n')),(0,r.kt)("h3",{id:"dataprovidername"},(0,r.kt)("inlineCode",{parentName:"h3"},"dataProviderName")),(0,r.kt)("p",null,"If there is more than one ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider"),", you should use the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProviderName")," that you will use.\nIt is useful when you want to use a different ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider")," for a specific resource."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you want to use a different ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider")," on all resource pages, you can use the ",(0,r.kt)("a",{parentName:"p",href:"docs/api-reference/core/components/refine-config/#dataprovidername"},(0,r.kt)("inlineCode",{parentName:"a"},"dataProvider")," prop ")," of the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Refine>")," component.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},'const form = useForm({\n    dataProviderName: "second-data-provider",\n});\n')),(0,r.kt)("h3",{id:"mutationmode"},(0,r.kt)("inlineCode",{parentName:"h3"},"mutationMode")),(0,r.kt)("p",null,"Mutation mode determines which mode the mutation runs with. Mutations can run under three different modes: ",(0,r.kt)("inlineCode",{parentName:"p"},"pessimistic"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"optimistic")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"undoable"),". Default mode is ",(0,r.kt)("inlineCode",{parentName:"p"},"pessimistic"),".\nEach mode corresponds to a different type of user experience."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For more information about mutation modes, please check ",(0,r.kt)("a",{parentName:"p",href:"/docs/advanced-tutorials/mutation-mode"},"Mutation Mode documentation")," page.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},'const form = useForm({\n    action: "edit",\n    resource: "categories",\n    mutationMode: "undoable", // "pessimistic" | "optimistic" | "undoable",\n});\n')),(0,r.kt)("h3",{id:"successnotification"},(0,r.kt)("inlineCode",{parentName:"h3"},"successNotification")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/notification-provider/"},(0,r.kt)("inlineCode",{parentName:"a"},"NotificationProvider"))," is required.")),(0,r.kt)("p",null,"After form is submitted successfully, ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will call ",(0,r.kt)("inlineCode",{parentName:"p"},"open")," function from ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/notification-provider/"},(0,r.kt)("inlineCode",{parentName:"a"},"NotificationProvider"))," to show a success notification. With this prop, you can customize the success notification."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},'const form = useForm({\n    successNotification: (data, values, resource) => {\n        return {\n            message: `Post Successfully created with ${data.title}`,\n            description: "Success with no errors",\n            type: "success",\n        };\n    },\n});\n')),(0,r.kt)("h3",{id:"errornotification"},(0,r.kt)("inlineCode",{parentName:"h3"},"errorNotification")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/notification-provider/"},(0,r.kt)("inlineCode",{parentName:"a"},"NotificationProvider"))," is required.")),(0,r.kt)("p",null,"After form is submit is failed, ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will call ",(0,r.kt)("inlineCode",{parentName:"p"},"open")," function from ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/notification-provider/"},(0,r.kt)("inlineCode",{parentName:"a"},"NotificationProvider"))," to show a success notification. With this prop, you can customize the success notification."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},'const form = useForm({\n    action: "create",\n    resource: "post",\n    errorNotification: (data, values, resource) => {\n        return {\n            message: `Something went wrong when deleting ${data.id}`,\n            description: "Error",\n            type: "error",\n        };\n    },\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Default values"',title:'"Default','values"':!0},'{\n    "message": "Error when updating <resource-name> (status code: ${err.statusCode})" or "Error when creating <resource-name> (status code: ${err.statusCode})",\n    "description": "Error",\n    "type": "error",\n}\n')),(0,r.kt)("h3",{id:"metadata"},(0,r.kt)("inlineCode",{parentName:"h3"},"metaData")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/general-concepts/#metadata"},(0,r.kt)("inlineCode",{parentName:"a"},"metaData"))," is used following two purposes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To pass additional information to data provider methods."),(0,r.kt)("li",{parentName:"ul"},"Generate GraphQL queries using plain JavaScript Objects (JSON). Please refer ",(0,r.kt)("a",{parentName:"li",href:"/docs/advanced-tutorials/data-provider/graphql/#edit-page"},"GraphQL")," for more information.")),(0,r.kt)("p",null,"In the following example, we pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"headers")," property in the ",(0,r.kt)("inlineCode",{parentName:"p"},"metaData")," object to the ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," method. With similar logic, you can pass any properties to specifically handle the data provider methods."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},'const form = useForm({\n    // highlight-start\n    metaData: {\n        headers: { "x-meta-data": "true" },\n    },\n    // highlight-end\n});\n\nconst myDataProvider = {\n    //...\n    // highlight-start\n    create: async ({ resource, variables, metaData }) => {\n        const headers = metaData?.headers ?? {};\n        // highlight-end\n        const url = `${apiUrl}/${resource}`;\n\n        // highlight-next-line\n        const { data } = await httpClient.post(url, variables, { headers });\n\n        return {\n            data,\n        };\n    },\n    //...\n};\n')),(0,r.kt)("h3",{id:"queryoptions"},(0,r.kt)("inlineCode",{parentName:"h3"},"queryOptions")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Works only in ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "edit"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "clone"')," mode.")),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"edit")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"clone")," mode, ",(0,r.kt)("strong",{parentName:"p"},"refine")," uses ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useOne/"},(0,r.kt)("inlineCode",{parentName:"a"},"useOne"))," hook to fetch data. You can pass ",(0,r.kt)("a",{parentName:"p",href:"https://tanstack.com/query/v4/docs/react/reference/useQuery"},(0,r.kt)("inlineCode",{parentName:"a"},"queryOptions"))," options by passing ",(0,r.kt)("inlineCode",{parentName:"p"},"queryOptions")," property."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    // highlight-start\n    queryOptions: {\n        retry: 3,\n    },\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"createmutationoptions"},(0,r.kt)("inlineCode",{parentName:"h3"},"createMutationOptions")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This option is only available when ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "create"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "clone"'),".")),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"clone")," mode, ",(0,r.kt)("strong",{parentName:"p"},"refine")," uses ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useCreate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate"))," hook to create data. You can pass ",(0,r.kt)("a",{parentName:"p",href:"https://tanstack.com/query/v4/docs/react/reference/useMutation"},(0,r.kt)("inlineCode",{parentName:"a"},"mutationOptions"))," by passing ",(0,r.kt)("inlineCode",{parentName:"p"},"createMutationOptions")," property."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},"const form = useForm({\n    // highlight-start\n    createMutationOptions: {\n        retry: 3,\n    },\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"updatemutationoptions"},(0,r.kt)("inlineCode",{parentName:"h3"},"updateMutationOptions")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This option is only available when ",(0,r.kt)("inlineCode",{parentName:"p"},'action: "edit"'),".")),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"edit")," mode, ",(0,r.kt)("strong",{parentName:"p"},"refine")," uses ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useUpdate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate"))," hook to update data. You can pass ",(0,r.kt)("a",{parentName:"p",href:"https://tanstack.com/query/v4/docs/react/reference/useMutation"},(0,r.kt)("inlineCode",{parentName:"a"},"mutationOptions"))," by passing ",(0,r.kt)("inlineCode",{parentName:"p"},"updateMutationOptions")," property."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    // highlight-start\n    updateMutationOptions: {\n        retry: 3,\n    },\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"warnwhenunsavedchanges"},(0,r.kt)("inlineCode",{parentName:"h3"},"warnWhenUnsavedChanges")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"false"))),(0,r.kt)("p",null,"When it's true, Shows a warning when the user tries to leave the page with unsaved changes. It can be used to prevent the user from accidentally leaving the page."),(0,r.kt)("p",null,"It can be set globally in ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/components/refine-config/#warnwhenunsavedchanges"},(0,r.kt)("inlineCode",{parentName:"a"},"refine config")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    // highlight-start\n    warnWhenUnsavedChanges: true,\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"submitonenter"},(0,r.kt)("inlineCode",{parentName:"h3"},"submitOnEnter")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"false"))),(0,r.kt)("p",null,"When it's true, pressing the Enter key will submit the form. It can be used to prevent the user from accidentally leaving the page."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    // highlight-start\n    submitOnEnter: true,\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"livemode"},(0,r.kt)("inlineCode",{parentName:"h3"},"liveMode")),(0,r.kt)("p",null,'Whether to update data automatically ("auto") or not ("manual") if a related live event is received. It can be used to update and show data in Realtime throughout your app.\nFor more information about live mode, please check ',(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/live-provider/#livemode"},"Live / Realtime")," page."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},'const form = useForm({\n    // highlight-start\n    liveMode: "auto",\n    // highlight-end\n});\n')),(0,r.kt)("h3",{id:"onliveevent"},(0,r.kt)("inlineCode",{parentName:"h3"},"onLiveEvent")),(0,r.kt)("p",null,"The callback function that is executed when new events from a subscription are arrived."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const form = useForm({\n    // highlight-start\n    onLiveEvent: (event) => {\n        console.log(event);\n    },\n    // highlight-end\n});\n")),(0,r.kt)("h3",{id:"liveparams"},(0,r.kt)("inlineCode",{parentName:"h3"},"liveParams")),(0,r.kt)("p",null,"Params to pass to ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/live-provider/#subscribe"},"liveProvider's")," subscribe method."),(0,r.kt)("h2",{id:"return-values"},"Return Values"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"All ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/useForm/"},(0,r.kt)("inlineCode",{parentName:"a"},"core useForm"))," return values also available in ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm"),".")),(0,r.kt)("h3",{id:"form"},(0,r.kt)("inlineCode",{parentName:"h3"},"form")),(0,r.kt)("p",null,"It's a ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form"},(0,r.kt)("inlineCode",{parentName:"a"},"<Form>"))," instance. You can refer to ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form#api"},"Antd ",(0,r.kt)("inlineCode",{parentName:"a"},"<Form>"))," for more information."),(0,r.kt)("h3",{id:"formprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"formProps")),(0,r.kt)("p",null,"It's required to manage ",(0,r.kt)("a",{parentName:"p",href:"https://ant.design/components/form"},(0,r.kt)("inlineCode",{parentName:"a"},"<Form>"))," state and actions."),(0,r.kt)("h4",{id:"onfinish"},(0,r.kt)("inlineCode",{parentName:"h4"},"onFinish")),(0,r.kt)("p",null,"is called when the form is submitted. It will call the appropriate mutation based on the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," property."),(0,r.kt)("p",null,"The only difference between ",(0,r.kt)("inlineCode",{parentName:"p"},"onFinish")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"formProps.onFinish")," is that passing a value to ",(0,r.kt)("inlineCode",{parentName:"p"},"formProps.onFinish"),"is mandatory, whereas ",(0,r.kt)("inlineCode",{parentName:"p"},"onFinish")," can automatically retrieve values from the form state."),(0,r.kt)("h4",{id:"onvalueschange"},(0,r.kt)("inlineCode",{parentName:"h4"},"onValuesChange")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"warnWhenUnsavedChanges")," feature requires this function to work. If you want to override the form's ",(0,r.kt)("inlineCode",{parentName:"p"},"onValuesChange"),", keep this in mind."),(0,r.kt)("h4",{id:"onkeyup"},(0,r.kt)("inlineCode",{parentName:"h4"},"onKeyUp")),(0,r.kt)("p",null,"It's a function that will be called when a key is pressed. By default, it will call ",(0,r.kt)("inlineCode",{parentName:"p"},"form.submit()")," function when the pressed key is ",(0,r.kt)("inlineCode",{parentName:"p"},"Enter"),"."),(0,r.kt)("h4",{id:"initialvalues"},(0,r.kt)("inlineCode",{parentName:"h4"},"initialValues")),(0,r.kt)("p",null,"When ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"edit"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"clone"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},"initialValues")," will be set to the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," returned from ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useOne/"},(0,r.kt)("inlineCode",{parentName:"a"},"useOne"))," hook."),(0,r.kt)("h3",{id:"formloading"},(0,r.kt)("inlineCode",{parentName:"h3"},"formLoading")),(0,r.kt)("p",null,"Loading state of a modal. It's ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," when ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," is currently being submitted or data is being fetched for the ",(0,r.kt)("inlineCode",{parentName:"p"},'"edit"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"clone"')," mode."),(0,r.kt)("h3",{id:"queryresult"},(0,r.kt)("inlineCode",{parentName:"h3"},"queryResult")),(0,r.kt)("p",null,"If the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"edit"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"clone"')," or if a ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," with an ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," is provided, ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will call ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useOne/"},(0,r.kt)("inlineCode",{parentName:"a"},"useOne"))," and set the returned values as the ",(0,r.kt)("inlineCode",{parentName:"p"},"queryResult")," property."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const { queryResult } = useForm();\n\nconst { data } = queryResult;\n")),(0,r.kt)("h3",{id:"mutationresult"},(0,r.kt)("inlineCode",{parentName:"h3"},"mutationResult")),(0,r.kt)("p",null,"When in ",(0,r.kt)("inlineCode",{parentName:"p"},'"create"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"clone"')," mode, ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will call ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useCreate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate")),". When in ",(0,r.kt)("inlineCode",{parentName:"p"},'"edit"')," mode, it will call ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/data/useUpdate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate"))," and set the resulting values as the ",(0,r.kt)("inlineCode",{parentName:"p"},"mutationResult"),' property."'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const { mutationResult } = useForm();\n\nconst { data } = mutationResult;\n")),(0,r.kt)("h3",{id:"setid"},(0,r.kt)("inlineCode",{parentName:"h3"},"setId")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," determine ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from the router. If you want to change the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," dynamically, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"setId")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},"const { id, setId } = useForm();\n\nconst handleIdChange = (id: string) => {\n    setId(id);\n};\n\nreturn (\n    <div>\n        <input value={id} onChange={(e) => handleIdChange(e.target.value)} />\n    </div>\n);\n")),(0,r.kt)("h3",{id:"redirect-1"},(0,r.kt)("inlineCode",{parentName:"h3"},"redirect")),(0,r.kt)("p",null,'"By default, after a successful mutation, ',(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},'"list"')," page. To redirect to a different page, you can either use the ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect")," function to programmatically specify the destination, or set the redirect ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/useForm/#redirect"},"property")," in the hook's options."),(0,r.kt)("p",null,"In the following example we will redirect to the ",(0,r.kt)("inlineCode",{parentName:"p"},'"show"')," page after a successful mutation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/create.tsx"',title:'"src/posts/create.tsx"'},'const { onFinish, redirect } = useForm();\n\n// --\n\nconst handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const data = await onFinish(formValues);\n    redirect("show", data?.data?.id);\n};\n\n// --\n')),(0,r.kt)("h3",{id:"onfinish-1"},(0,r.kt)("inlineCode",{parentName:"h3"},"onFinish")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"onFinish")," is a function that is called when the form is submitted. It will call the appropriate mutation based on the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," property.\nYou can override the default behavior by passing an ",(0,r.kt)("inlineCode",{parentName:"p"},"onFinish")," function in the hook's options."),(0,r.kt)("p",null,"For example you can ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/antd/hooks/form/useForm/#how-can-i-change-the-form-data-before-submitting-it-to-the-api"},"change values before sending to the API"),"."),(0,r.kt)("h2",{id:"faq"},"FAQ"),(0,r.kt)("h3",{id:"how-can-invalidate-other-resources"},"How can Invalidate other resources?"),(0,r.kt)("p",null,"You can invalidate other resources with help of ",(0,r.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/invalidate/useInvalidate/"},(0,r.kt)("inlineCode",{parentName:"a"},"useInvalidate"))," hook."),(0,r.kt)("p",null,"It is useful when you want to ",(0,r.kt)("inlineCode",{parentName:"p"},"invalidate")," other resources don't have relation with the current resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/posts/edit.tsx"',title:'"src/posts/edit.tsx"'},'import React from "react";\nimport { Create, Form, Input, useForm } from "@pankod/refine-antd";\n\nconst PostEdit = () => {\n    const invalidate = useInvalidate();\n\n    const form = useForm({\n        // highlight-start\n        onMutationSuccess: (data, variables, context) => {\n            invalidate({\n                resource: "users",\n                invalidates: ["resourceAll"],\n            });\n        },\n        // highlight-end\n    });\n\n    // ---\n};\n')),(0,r.kt)("h3",{id:"how-can-i-change-the-form-data-before-submitting-it-to-the-api"},"How can I change the form data before submitting it to the API?"),(0,r.kt)("p",null,"You may need to modify the form data before it is sent to the API."),(0,r.kt)("p",null,"For example, Let's send the values we received from the user in two separate inputs, ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"surname"),", to the API as ",(0,r.kt)("inlineCode",{parentName:"p"},"fullName"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/user/create.tsx"',title:'"pages/user/create.tsx"'},'import React from "react";\nimport { Create, Form, Input, useForm } from "@pankod/refine-antd";\n\nexport const UserCreate: React.FC = () => {\n    // highlight-next-line\n    const { formProps, saveButtonProps, onFinish } = useForm();\n\n    // highlight-start\n    const handleOnFinish = (values) => {\n        onFinish({\n            fullName: `${values.name} ${values.surname}`,\n        });\n    };\n    // highlight-end\n\n    return (\n        <Create saveButtonProps={saveButtonProps}>\n            // highlight-next-line\n            <Form {...formProps} onFinish={handleOnFinish} layout="vertical">\n                <Form.Item label="Name" name="name">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Surname" name="surname">\n                    <Input />\n                </Form.Item>\n            </Form>\n        </Create>\n    );\n};\n')),(0,r.kt)("h2",{id:"api-reference"},"API Reference"),(0,r.kt)("h3",{id:"properties-1"},"Properties"),(0,r.kt)(k,{module:"@pankod/refine-antd/useForm",mdxType:"PropsTable"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"*"),": These props have default values in ",(0,r.kt)("inlineCode",{parentName:"p"},"RefineContext")," and can also be set on ",(0,r.kt)("strong",{parentName:"p"},"<",(0,r.kt)("a",{parentName:"strong",href:"/docs/api-reference/core/components/refine-config"},"Refine"),">")," component. ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," will use what is passed to ",(0,r.kt)("inlineCode",{parentName:"p"},"<Refine>")," as default but a local value will override it.")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"return-values-1"},"Return values"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"onFinish"),(0,r.kt)("td",{parentName:"tr",align:null},"Triggers the mutation"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"(values?: TVariables) => Promise<CreateResponse<TData>")," ","|"," ",(0,r.kt)("inlineCode",{parentName:"td"},"UpdateResponse<TData>")," ","|"," ",(0,r.kt)("inlineCode",{parentName:"td"},"void"),">")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"form"),(0,r.kt)("td",{parentName:"tr",align:null},"Ant Design form instance"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://ant.design/components/form/#FormInstance"},(0,r.kt)("inlineCode",{parentName:"a"},"FormInstance")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"formProps"),(0,r.kt)("td",{parentName:"tr",align:null},"Ant Design form props"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://ant.design/components/form/#Form"},(0,r.kt)("inlineCode",{parentName:"a"},"FormProps")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"saveButtonProps"),(0,r.kt)("td",{parentName:"tr",align:null},"Props for a submit button"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{ disabled: boolean; onClick: () => void; loading?:boolean; }"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"redirect"),(0,r.kt)("td",{parentName:"tr",align:null},"Redirect function for custom redirections"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"(redirect:")," ",(0,r.kt)("inlineCode",{parentName:"td"},'"list"'),"|",(0,r.kt)("inlineCode",{parentName:"td"},'"edit"'),"|",(0,r.kt)("inlineCode",{parentName:"td"},'"show"'),"|",(0,r.kt)("inlineCode",{parentName:"td"},'"create"'),"|"," ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," ,",(0,r.kt)("inlineCode",{parentName:"td"},"idFromFunction?:")," ",(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#basekey"},(0,r.kt)("inlineCode",{parentName:"a"},"BaseKey")),"|",(0,r.kt)("inlineCode",{parentName:"td"},"undefined"),") => ",(0,r.kt)("inlineCode",{parentName:"td"},"data"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queryResult"),(0,r.kt)("td",{parentName:"tr",align:null},"Result of the query of a record"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://react-query.tanstack.com/reference/useQuery"},(0,r.kt)("inlineCode",{parentName:"a"},"QueryObserverResult<T>")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mutationResult"),(0,r.kt)("td",{parentName:"tr",align:null},"Result of the mutation triggered by submitting the form"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://react-query.tanstack.com/reference/useMutation"},(0,r.kt)("inlineCode",{parentName:"a"},"UseMutationResult<T>")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"formLoading"),(0,r.kt)("td",{parentName:"tr",align:null},"Loading state of form request"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boolean"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},"Record id for ",(0,r.kt)("inlineCode",{parentName:"td"},"clone")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"create")," action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#basekey"},(0,r.kt)("inlineCode",{parentName:"a"},"BaseKey")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"setId"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")," setter"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Dispatch<SetStateAction<")," ",(0,r.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,r.kt)("inlineCode",{parentName:"td"},"number")," ","|"," ",(0,r.kt)("inlineCode",{parentName:"td"},"undefined>>"))))),(0,r.kt)("h3",{id:"type-parameters"},"Type Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Desription"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TData"),(0,r.kt)("td",{parentName:"tr",align:null},"Result data of the query that extends ",(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#baserecord"},(0,r.kt)("inlineCode",{parentName:"a"},"BaseRecord"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#baserecord"},(0,r.kt)("inlineCode",{parentName:"a"},"BaseRecord")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TError"),(0,r.kt)("td",{parentName:"tr",align:null},"Custom error object that extends ",(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#httperror"},(0,r.kt)("inlineCode",{parentName:"a"},"HttpError"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/api-reference/core/interfaceReferences#httperror"},(0,r.kt)("inlineCode",{parentName:"a"},"HttpError")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TVariables"),(0,r.kt)("td",{parentName:"tr",align:null},"Values for params."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(h,{path:"form-antd-use-form",mdxType:"CodeSandboxExample"}))}N.isMDXComponent=!0}}]);