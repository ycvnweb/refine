"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[90265],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),m=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=m(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=m(n),u=r,h=c["".concat(s,".").concat(u)]||c[u]||p[u]||a;return n?o.createElement(h,i(i({ref:t},d),{},{components:n})):o.createElement(h,i({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var m=2;m<a;m++)i[m]=n[m];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},30412:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>m});var o=n(87462),r=(n(67294),n(3905));const a={title:"React Hook Form Validation with Complete Examples",description:"We'll implement React Hook Form custom validations and schema validations using yup.",slug:"react-hook-form-validation-examples",authors:"david_omotayo",tags:["react","react-hook-form","refine","form-validation","yup","schema-validation"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/social.png",hide_table_of_contents:!1},i=void 0,l={permalink:"/blog/react-hook-form-validation-examples",source:"@site/blog/2022-09-27-react-hook-form-validation.md",title:"React Hook Form Validation with Complete Examples",description:"We'll implement React Hook Form custom validations and schema validations using yup.",date:"2022-09-27T00:00:00.000Z",formattedDate:"September 27, 2022",tags:[{label:"react",permalink:"/blog/tags/react"},{label:"react-hook-form",permalink:"/blog/tags/react-hook-form"},{label:"refine",permalink:"/blog/tags/refine"},{label:"form-validation",permalink:"/blog/tags/form-validation"},{label:"yup",permalink:"/blog/tags/yup"},{label:"schema-validation",permalink:"/blog/tags/schema-validation"}],readingTime:17.365,hasTruncateMarker:!1,authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],frontMatter:{title:"React Hook Form Validation with Complete Examples",description:"We'll implement React Hook Form custom validations and schema validations using yup.",slug:"react-hook-form-validation-examples",authors:"david_omotayo",tags:["react","react-hook-form","refine","form-validation","yup","schema-validation"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/social.png",hide_table_of_contents:!1},prevItem:{title:"How to use Docker Build Args and Environment Variables",permalink:"/blog/docker-build-args-and-env-vars"},nextItem:{title:"When to use dangerouslySetInnerHTML in React?",permalink:"/blog/use-react-dangerouslysetinnerhtml"},relatedPosts:[{title:"Material UI button in React",permalink:"/blog/mui-button-in-react",formattedDate:"September 5, 2022",authors:[{name:"Doro Onome",title:"Software Developer",url:"https://github.com/Nomzy-kush",imageURL:"https://github.com/Nomzy-kush.png",key:"doro_onome"}],readingTime:9.04,date:"2022-09-05T00:00:00.000Z"},{title:"Build Fast and Customizable Admin Panel with NestJS",permalink:"/blog/customizable-admin-panel-with-nestjs",formattedDate:"October 4, 2021",authors:[{name:"Y\u0131ld\u0131ray \xdcnl\xfc",title:"Software Developer",url:"https://github.com/yildirayunlu",imageURL:"https://github.com/yildirayunlu.png",key:"yildiray"}],readingTime:4,date:"2021-10-04T00:00:00.000Z"},{title:"MUI Icons in React",permalink:"/blog/mui-icons-in-react",formattedDate:"August 24, 2022",authors:[{name:"Doro Onome",title:"Software Developer",url:"https://github.com/Nomzy-kush",imageURL:"https://github.com/Nomzy-kush.png",key:"doro_onome"}],readingTime:9.9,date:"2022-08-24T00:00:00.000Z"}],authorPosts:[{title:"How to Create Dynamic Forms in React CRUD app with Ant Design",permalink:"/blog/react-crud-app-with-dynamic-form-ant-design",formattedDate:"November 17, 2022",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:23.26,date:"2022-11-17T00:00:00.000Z"},{title:"Build a Progressive Web App (PWA) with Next.js",permalink:"/blog/next-js-pwa",formattedDate:"September 11, 2022",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:18.495,date:"2022-09-11T00:00:00.000Z"}]},s={authorsImageUrls:[void 0]},m=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisite",id:"prerequisite",level:2},{value:"What is React Hook Form?",id:"what-is-react-hook-form",level:2},{value:"What is refine?",id:"what-is-refine",level:2},{value:"Project setup",id:"project-setup",level:2},{value:"Integrating React Hook Forms",id:"integrating-react-hook-forms",level:3},{value:"Validating forms with React Hook Forms",id:"validating-forms-with-react-hook-forms",level:2},{value:"Schema Validation",id:"schema-validation",level:2},{value:"Handling errors",id:"handling-errors",level:2},{value:"How to conditionally render input fields",id:"how-to-conditionally-render-input-fields",level:2},{value:"Form submission",id:"form-submission",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Example",id:"example",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},p=d("PromotionBanner"),c=d("StackblitzExample"),u={toc:m};function h(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Forms are crucial in how web administrators connect with their audience and how users interact with web applications. Hence, form validation is often the utmost priority for a developer when building web applications."),(0,r.kt)("p",null,"However, due to how complicated and frustrating form validation can get, developers often settle for third-party libraries that simplify the process."),(0,r.kt)("p",null,"In this guide, we\u2019ll introduce React Hook Form, a form validation library for React, and demonstrate how to use it to validate forms in React applications."),(0,r.kt)("p",null,"Steps we'll cover:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#what-is-react-hook-form"},"What is React Hook Form?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#what-is-refine"},"What is refine?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#project-setup"},"Project setup"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#integrating-react-hook-forms"},"Integrating React Hook Forms")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#validating-forms-with-react-hook-forms"},"Validating forms with React Hook Forms")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#schema-validation"},"Schema Validation")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#handling-errors"},"Handling errors")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#how-to-conditionally-render-input-fields"},"How to conditionally render input fields")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#form-submission"},"Form submission"))),(0,r.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,r.kt)("p",null,"We'll be using refine to set up an example project for this article, and since refine is a Typescript first library, you need to have a good understanding of Typescript to follow along with this tutorial."),(0,r.kt)("p",null,"You'll also need the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The latest version of Node.js installed on your machine"),(0,r.kt)("li",{parentName:"ul"},"Fundamental knowledge of React and refine"),(0,r.kt)("li",{parentName:"ul"},"Basic understanding of Material UI")),(0,r.kt)("h2",{id:"what-is-react-hook-form"},"What is React Hook Form?"),(0,r.kt)("p",null,"React Hook Form is a lightweight library for validating forms in React. It provides a flexible and extensible approach to handling form functionalities such as validation, error handling, and submission with minimal code and zero re-renders."),(0,r.kt)("p",null,"The library allows you to isolate component re-renders by using uncontrolled inputs with the ref hook to control inputs, rather than using the conventional way of depending on a state, which may cause unnecessary re-renders."),(0,r.kt)("p",null,"React Hook Form uses its constraint-based validation API to validate forms by leveraging existing HTML markups, thus maintaining a good HTML standard. "),(0,r.kt)("p",null,"The package is super light, it has a minified size of 24.6kb and a minified + gzipped size of 8.8kb. This is because the library doesn\u2019t use any dependencies to handle any of its functionalities under the hood."),(0,r.kt)("div",{class:"img-container","align-items":"center"},(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-package-size.png",alt:"react Hook Form package size"})),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"what-is-refine"},"What is refine?"),(0,r.kt)("p",null,"refine is a headless React-based framework for rapidly building CRUD applications like admin panels, dashboards, and internal tools. The framework uses a collection of helper hooks, components, and data providers that give you complete control over your application's user interface."),(0,r.kt)("p",null,"There are a lot of benefits to using refine in your applications, to name a few:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"It is headless, meaning you can either use it as is or pair it up with third-party UI libraries."),(0,r.kt)("li",{parentName:"ul"},"Easy learning curve"),(0,r.kt)("li",{parentName:"ul"},"Customization "),(0,r.kt)("li",{parentName:"ul"},"Backend agnostic, you can connect with any backend technologies"),(0,r.kt)("li",{parentName:"ul"},"Authentication, state management, data fetching routing, and more are prioritized.")),(0,r.kt)("p",null,"Visit ",(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/getting-started/overview/"},"refine's documentation")," to learn more about the framework."),(0,r.kt)("h2",{id:"project-setup"},"Project setup"),(0,r.kt)("p",null,"Before we get into the nitty-gritty of how React Hook Form works and how to use it to validate forms in your projects, let's set up an example project with refine for reference purposes."),(0,r.kt)("p",null,"First things first, open your command line tool, cd to your folder of choice, and run the following command to bootstrap a refine React template using the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate"},"superplate CLI")," tool:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npx superplate-cli -p refine-react tutorial\n")),(0,r.kt)("p",null,"After running the command, you\u2019ll be prompted to choose your preferences for the project.",(0,r.kt)("br",{parentName:"p"}),"\n","Select the following options to proceed:"),(0,r.kt)("div",{class:"img-container","align-items":"center"},(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-cli.png",alt:"react Hook Form cli"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"Once the installation is done, run the commands below to cd into the project folder and start the development server:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm run dev\n")),(0,r.kt)("p",null,"The second command will start the development server for our project and automatically preview our app in the default browser. If it doesn't, open the browser manually and navigate to http://localhost:3000."),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-dashboard.png",alt:"react Hook Form dashboard"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"You should see a similar refine welcome page rendered to your browser just like in the image above."),(0,r.kt)("p",null,"Next, we'll install the refine React Hook Form package and set up refine. To do that, go back to the command line and run the following command to install the ",(0,r.kt)("inlineCode",{parentName:"p"},"@pankod/refine-react-hook-form")," package:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm i @pankod/refine-react-hook-form\n")),(0,r.kt)("p",null,"After installation, open the project folder in your IDE of choice, in our case, we'll be using VS code. The next step is to create a pages subfolder inside the src folder and add a create.tsx file."),(0,r.kt)("p",null,"This file will serve as our resource page, which we're going to pass to the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Refine>")," component inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," file. "),(0,r.kt)("p",null,"Ideally, we\u2019d create a List page where we will display the submitted data from our form, but that is beyond the scope of this tutorial. For now, we\u2019ll add the ",(0,r.kt)("inlineCode",{parentName:"p"},"create.tsx")," file to the list property of the resources object."),(0,r.kt)("p",null,"To do so, open the ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," file and import the ",(0,r.kt)("inlineCode",{parentName:"p"},"create.tsx")," file, then add it to the resources object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@pankod/refine-core";\nimport {\n    notificationProvider,\n    RefineSnackbarProvider,\n    CssBaseline,\n    GlobalStyles,\n    Layout,\n    ThemeProvider,\n    LightTheme,\n    ReadyPage,\n    ErrorComponent,\n} from "@pankod/refine-mui";\nimport routerProvider from "@pankod/refine-react-router-v6";\nimport dataProvider from "@pankod/refine-simple-rest";\nimport Create from "pages/create";\n\nfunction App() {\n    return (\n        <ThemeProvider theme={LightTheme}>\n            <CssBaseline />\n            <GlobalStyles styles={{ html: { WebkitFontSmoothing: "auto" } }} />\n            <RefineSnackbarProvider>\n                <Refine\n                    notificationProvider={notificationProvider}\n                    Layout={Layout}\n                    ReadyPage={ReadyPage}\n                    catchAll={<ErrorComponent />}\n                    routerProvider={routerProvider}\n                    resources={[\n                        {\n                            name: "posts",\n                            list: Create,\n                        },\n                    ]}\n                    dataProvider={dataProvider(\n                        "https://api.fake-rest.refine.dev"\n                    )}\n                />\n            </RefineSnackbarProvider>\n        </ThemeProvider>\n    );\n}\n\nexport default App;\n')),(0,r.kt)("p",null,"Next, open the ",(0,r.kt)("inlineCode",{parentName:"p"},"create.tsx")," file and add the following code:"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Show create.tsx code"),(0,r.kt)("p",null,(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="create.tsx"',title:'"create.tsx"'},'import React from "react";\nimport {\n    TextField,\n    FormControl,\n    InputLabel,\n    MenuItem,\n    Select,\n    Button,\n} from "@pankod/refine-mui";\n\ninterface iformValue {\n    firstname: string;\n    lastname: string;\n    address: string;\n    number: number;\n    work: string;\n    company: string;\n    role: string;\n}\n\nconst Create: React.FC = (props) => {\n    return (\n        <form style={{ display: "flex", flexDirection: "column" }}>\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="First Name"\n                margin="dense"\n                required\n            />\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="Last Name"\n                margin="dense"\n                required\n            />\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="Address"\n                margin="dense"\n                required\n            />\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="Number"\n                margin="dense"\n                required\n                type="number"\n            />\n            )} />\n            <FormControl sx={{ marginTop: 1, marginBottom: 0.7 }} required>\n                <InputLabel id="type-label">Work</InputLabel>\n                <Select\n                    sx={{ maxWidth: 600 }}\n                    margin="dense"\n                    type="select"\n                    labelId="type-label"\n                    label="Work"\n                >\n                    <MenuItem value="employed">Employed</MenuItem>\n                    <MenuItem value="unemployed">Unemployed</MenuItem>\n                </Select>\n            </FormControl>\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="Company"\n                margin="dense"\n                required\n            />\n            <TextField\n                fullWidth\n                sx={{ maxWidth: 600 }}\n                label="Role"\n                margin="dense"\n                required\n            />\n            )}\n            <Button\n                type="submit"\n                variant="contained"\n                fullWidth\n                sx={{\n                    maxWidth: "600px",\n                    padding: "10px",\n                    backgroundColor: "#67BE23",\n                    color: "white",\n                    marginTop: "5px",\n                }}\n            >\n                Submit\n            </Button>\n        </form>\n    );\n};\n\nexport default Create;\n')))),(0,r.kt)("p",null,"Here, we created a regular HTML form using a form element and the MUI TextField form control components.",(0,r.kt)("br",{parentName:"p"}),"\n","Each ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," will be used for getting the first name, last name, address, employment status, place of work, role, and phone number values. We also created an interface object of the form, we\u2019ll be using this later in the article."),(0,r.kt)("p",null,"If you save your progress and open up the browser, you should see a form similar to the one below."),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form.png",alt:"react Hook Form view"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"That's it for the project setup, next we'll integrate React Hook Forms into our form."),(0,r.kt)("h3",{id:"integrating-react-hook-forms"},"Integrating React Hook Forms"),(0,r.kt)("p",null,"refine is a framework built with many micro-frontend solutions in mind, and form validation isn't an exception. As a result, it offers a React Hook Form adapter that allows you to seamlessly integrate the React Hook Form library with refine."),(0,r.kt)("p",null,"But before we start implementing React Hook Form in our app, we need to first understand its fundamentals. "),(0,r.kt)("p",null,"The library provides a set of useful components and hooks, such as the controller component and the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook, that let us register our form component into the hook, thus making its values available for both validation and submission."),(0,r.kt)("p",null,"The library performs most of these functionalities using the methods exposed by the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook. Here are some of the available methods:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"register"),": This method allows you to register an input for validation")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"handleSubmit"),": This function receives form data if validation is successful.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"formState"),": This object contains information about the form's state.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"control"),": This object contains methods for registering components into React Hook Form"))),(0,r.kt)("p",null,"Here's a basic usage of the useForm hook:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const {\n  control,\n  handleSubmit,\n  watch,\n  formState: { errors },\n} = useForm({\n  mode: "onChange",\n  defaultValues,\n});\n')),(0,r.kt)("p",null,"The controller, on the other hand, is a wrapper component for registering controlled components from external UI libraries such as MUI. "),(0,r.kt)("p",null,"The component takes care of the registration process of components that don't expose input's ref but rely on a state. So it's a register method, but for controlled inputs."),(0,r.kt)("p",null,"The component accepts three major properties: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"name"),": This prop accepts a unique string value of the input's name.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"control"),": This prop accepts the control object from the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"render"),": This prop accepts a function that renders a component that will be controlled by React Hook Form."))),(0,r.kt)("p",null,"Here's a basic usage of the controller component:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'<Controller\n    control={control}\n    name="firstname"\n    render={({ field }) => (\n        <TextField\n            {...field}\n            fullWidth\n            sx={{ maxWidth: 600 }}\n            label="First Name"\n            margin="dense"\n            required\n            error={!!errors.firstname}\n            helperText={errors.firstname && `${errors.firstname.message}`}\n        />\n    )}\n/>;\n')),(0,r.kt)("p",null,"In the example above, we're passing the controller properties to the ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," component via the field parameter and rendering it with the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Controller>")," render property."),(0,r.kt)("p",null,"Since we're using MUI for our project, our focus will be on the Controller hook."),(0,r.kt)("p",null,"Now to integrate React Hook Form into our application, we'll import the Controller component and the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"create.tsx")," file like so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Controller, useForm } from "@pankod/refine-react-hook-form";\n')),(0,r.kt)("p",null,"Next, we'll wrap the ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," components with the Controller component:"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Show create.tsx code"),(0,r.kt)("p",null,(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/resources/create.tsx"',title:'"src/resources/create.tsx"'},'import React from "react";\nimport {\n    TextField,\n    FormControl,\n    InputLabel,\n    MenuItem,\n    Select,\n    Button,\n} from "@pankod/refine-mui";\nimport { Controller } from "@pankod/refine-react-hook-form";\n\nconst Create: React.FC = (props) => {\n    return (\n        <form style={{ display: "flex", flexDirection: "column" }}>\n            <Controller\n                control={control}\n                name="firstname"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="First Name"\n                        margin="dense"\n                        required\n                    />\n                )}\n            />\n            <Controller\n                control={control}\n                name="lastname"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="Last Name"\n                        margin="dense"\n                        required\n                    />\n                )}\n            />\n            <Controller\n                control={control}\n                name="address"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="Address"\n                        margin="dense"\n                        required\n                    />\n                )}\n            />\n            <Controller\n                control={control}\n                name="number"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="Number"\n                        margin="dense"\n                        required\n                        type="number"\n                    />\n                )}\n            />\n            <FormControl sx={{ marginTop: 1, marginBottom: 0.7 }} required>\n                <InputLabel id="type-label">Work</InputLabel>\n                <Controller\n                    control={control}\n                    name="work"\n                    render={({ field }) => (\n                        <Select\n                            sx={{ maxWidth: 600 }}\n                            margin="dense"\n                            {...field}\n                            type="select"\n                            labelId="type-label"\n                            label="Work"\n                        >\n                            <MenuItem value="employed">Employed</MenuItem>\n                            <MenuItem value="unemployed">Unemployed</MenuItem>\n                        </Select>\n                    )}\n                />\n            </FormControl>\n            <Controller\n                control={control}\n                name="company"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="Company"\n                        margin="dense"\n                        required\n                    />\n                )}\n            />\n            <Controller\n                control={control}\n                name="role"\n                render={({ field }) => (\n                    <TextField\n                        {...field}\n                        fullWidth\n                        sx={{ maxWidth: 600 }}\n                        label="Role"\n                        margin="dense"\n                        required\n                    />\n                )}\n            />\n            <Button\n                type="submit"\n                variant="contained"\n                fullWidth\n                sx={{\n                    maxWidth: "600px",\n                    padding: "10px",\n                    backgroundColor: "#67BE23",\n                    color: "white",\n                    marginTop: "5px",\n                }}\n            >\n                Submit\n            </Button>\n        </form>\n    );\n};\n\nexport default Create;\n')))),(0,r.kt)("p",null," Here, we are passing the name keys (firstname, lastname, number\u2026), control method, and ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," component to the name, control, and render properties of the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Controller>")," component respectively."),(0,r.kt)("p",null,"We\u2019re also using the ",(0,r.kt)("inlineCode",{parentName:"p"},"field")," prop to integrate the controller\u2019s data with our ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," components, by dynamically spreading it on each component."),(0,r.kt)("p",null,"For the next step, destructure the control method from the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/resources/create.tsx"',title:'"src/resources/create.tsx"'},'import React from "react";\nimport {\n    TextField,\n    FormControl,\n    InputLabel,\n    MenuItem,\n    Select,\n    Button,\n} from "@pankod/refine-mui";\n\ninterface IFormValue {\n    firstname: string;\n    lastname: string;\n    address: string;\n    number: number;\n    work: string;\n    company: string;\n    role: string;\n}\nconst defaultValues = {\n    firstname: "",\n    lastname: "",\n    address: "",\n    number: 0,\n    work: "unemployed",\n    company: "",\n    role: "",\n};\n\nconst Create: React.FC = (props) => {\n    const { control } =\n        useForm <\n        IFormValue >\n        {\n            //highlight-start\n            mode: "onChange",\n            defaultValues,\n            //highlight-end\n        };\n\n    return (...);\n};\n \nexport default Create;\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"defaultValue")," object properties will serve as the default value for our form's TextFields. The mode property specifies how React Hook Form should watch the TextField for errors."),(0,r.kt)("p",null,"That\u2019s it, our form has been successfully integrated with React Hook Form. Next, we\u2019ll look at how we can validate the form."),(0,r.kt)("hr",null),(0,r.kt)(p,{title:"Small dev teams love this React framework!",image:"/img/diagram.png",mdxType:"PromotionBanner"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"validating-forms-with-react-hook-forms"},"Validating forms with React Hook Forms"),(0,r.kt)("p",null,"Now that we\u2019ve integrated our form with React Hook Form, we can easily validate inputs by adding specific restrictions to our TextFields, like the minimum and maximum characters allowed for each TextFields."),(0,r.kt)("p",null,"We can do this by adding a maxLength property to the ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," component and specifying a number value for either one."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'<TextField\n    fullWidth\n    inputProps={{\n        maxLength: 5,\n    }}\n    sx={{ maxWidth: 600 }}\n    label="First Name"\n    margin="dense"\n    required\n/>;\n')),(0,r.kt)("p",null,"This way, if we input characters beyond the specified amount in the maxLength props, we\u2019ll get an error."),(0,r.kt)("p",null,"To display the error, we\u2019d have to render a message based on the state of the errors object from the formState below each field:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'<Controller\n  control={control}\n  name="firstname"\n  render={({ field }) => (\n    <TextField\n      {...field}\n      fullWidth\n      inputProps={{\n        minLength: 5,\n      }}\n      label="First Name"\n      margin="dense"\n      required\n    />\n  )}\n/>;\n{\n  errors.firstname && (\n    <span style={{ color: "red" }}>\n      You need to enter at least 5 characters!\n    </span>\n  );\n}\n')),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form.gif",alt:"react Hook Form input"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"As you can see, this is not the ideal approach to displaying errors on the form, the placement of the error message is off and it doesn\u2019t go well with the input field\u2019s theme. "),(0,r.kt)("p",null,"What we\u2019re going to do is use a schema validation library, yup to be specific, to validate our form inputs. This will let us integrate the error messages into the ",(0,r.kt)("inlineCode",{parentName:"p"},"<TextField>")," component."),(0,r.kt)("h2",{id:"schema-validation"},"Schema Validation"),(0,r.kt)("p",null,"React Hook Form offers the option of using schema libraries such as ",(0,r.kt)("strong",{parentName:"p"},"yup")," and ",(0,r.kt)("strong",{parentName:"p"},"joi")," to validate forms input via the resolver property."),(0,r.kt)("p",null,"Schemas are object-based approaches for defining validation rules for form input fields. Schemas integrate seamlessly with React Hook Form, giving us complete control over validation and how error messages are displayed on a form."),(0,r.kt)("p",null,"The first step is to install the yup and the hook form resolver library with the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm i @hookform/resolvers yup\n")),(0,r.kt)("p",null,"The hook form resolver library is a resolver for ",(0,r.kt)("strong",{parentName:"p"},"yup"),". The library aids in integrating yup to the React Hook Form library."),(0,r.kt)("p",null,"Once the installation is done, import ",(0,r.kt)("inlineCode",{parentName:"p"},"yup")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"yupResolver")," and create a schema object with the following keys and values:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/resources/create.tsx"',title:'"src/resources/create.tsx"'},'import React from "react";\nimport {\n    TextField,\n    FormControl,\n    InputLabel,\n    MenuItem,\n    Select,\n    Button,\n} from "@pankod/refine-mui";\nimport { Controller, useForm } from "@pankod/refine-react-hook-form";\n\n//highlight-start\nimport * as Yup from "yup";\nimport { yupResolver } from "@hookform/resolvers/yup";\n\nconst schema = Yup.object().shape({\n    firstname: Yup.string()\n        .label("First Name")\n        .trim()\n        .required()\n        .min(3)\n        .max(64),\n    lastname: Yup.string().label("Last Name").trim().required().min(3).max(64),\n    address: Yup.string().label("Address").trim().required().min(3),\n    number: Yup.number().label("Number").required().max(255),\n    work: Yup.string().label("Work").oneOf(["unemployed", "employed"]),\n    company: Yup.string().when("work", {\n        is: (val: any) => val === "employed",\n        then: Yup.string().label("Company").required().min(3).max(64),\n    }),\n    role: Yup.string().when("work", {\n        is: (val: any) => val === "employed",\n        then: Yup.string().label("Role").required().min(3).max(64),\n    }),\n});\n//highlight-end\n\nconst Create: React.FC = (props) => {\n    return (...);\n};\n')),(0,r.kt)("p",null,"You'll notice that the schema for the select (work) component is different from the rest because we're conditionally validating the company and role fields. This is being done by the when, is and then methods. "),(0,r.kt)("p",null,"The method checks if the selected value is Employed, while the then method handles the validation. We'll take this up a notch in the coming section by rendering both fields based on the value selected."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"oneOff")," method is for telling yup that one of the string values in the provided array will be selected.")),(0,r.kt)("p",null,"Finally, add a resolver key to the useForm object and pass the yupResolver function and schema to it as a value:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const { control } = useForm<IFormValue>\n({\n  mode: "onChange",\n  defaultValues,\n  resolver: yupResolver(schema),\n});\n')),(0,r.kt)("p",null,"That\u2019s all we have to do to set up our schema, next we\u2019ll look at a new way we can handle errors."),(0,r.kt)("br",null),(0,r.kt)("div",null,(0,r.kt)("a",{href:"https://discord.gg/refine"},(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/discord_big_blue.png",alt:"discord banner"}))),(0,r.kt)("h2",{id:"handling-errors"},"Handling errors"),(0,r.kt)("p",null,"Handling errors with MUI's TextField component is fairly straightforward, all we have to do is destructure the errors property from the useForm\u2019s formState method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const { control, formState: { errors }} = useForm<IFormValue>\n({\n  mode: "onChange",\n  defaultValues,\n  //highlight-next-line\n  resolver: yupResolver(schema),\n});\n')),(0,r.kt)("p",null,"Then, pass the error object and message to the ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"helperText")," props like so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'<Controller\n    control={control}\n    name="firstname"\n    render={({ field }) => (\n        <TextField\n            fullWidth\n            {...field}\n            sx={{ maxWidth: 600 }}\n            label="First Name"\n            margin="dense"\n            required\n            error={!!errors.firstname}\n            helperText={errors.firstname && `${errors.firstname.message}`}\n        />\n    )}\n/>;\n')),(0,r.kt)("p",null,"This will check if there's an error with the ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," prop, then it'll display a dynamic message with the help of the ",(0,r.kt)("inlineCode",{parentName:"p"},"helperText")," prop."),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-big.gif",alt:"react Hook Form yup"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"Unlike the previous error message we implemented, this approach does not only display an error message that is intrinsic to the field's value, but it also changes the outline color of the TextField to red."),(0,r.kt)("p",null,"Our form is almost ready, what's left for us to do is to conditionally display the Company and Role fields and look at how we can handle our form's submission function."),(0,r.kt)("h2",{id:"how-to-conditionally-render-input-fields"},"How to conditionally render input fields"),(0,r.kt)("p",null,"To go about this, we'll need a function that we can use to track the input value of the Select component. Fortunately for us, React Hook Form has a watch function that lets us do just that."),(0,r.kt)("p",null,"The watch function does exactly what its name implies. It watches and tracks the values of the input fields."),(0,r.kt)("p",null,"First, destructure the watch function from the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook, then declare a work variable and pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"watch")," method to it, with the ",(0,r.kt)("inlineCode",{parentName:"p"},'"work"')," string passed to it as a parameter:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const {\n    control,\n    watch,\n    formState: { errors },\n} = useForm <IFormValue>\n{\n    mode: "onChange",\n    defaultValues,\n    resolver: yupResolver(schema),\n};\n\nconst work = watch("work");\n')),(0,r.kt)("p",null,"This way, the watch function will be able to track the selected option in the work select component."),(0,r.kt)("p",null,"Next, wrap the Company and Role fields with the following code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'{\n  type === "employed" && (\n    <>\n      <Controller\n        control={control}\n        name="company"\n        render={({ field }) => (\n          <TextField\n            {...field}\n            fullWidth\n            sx={{ maxWidth: 600 }}\n            label="Company"\n            margin="dense"\n            required\n            error={!!errors.company}\n            helperText={errors.company && `${errors.company.message}`}\n          />\n        )}\n      />\n      <Controller\n        control={control}\n        name="role"\n        render={({ field }) => (\n          <TextField\n            {...field}\n            fullWidth\n            sx={{ maxWidth: 600 }}\n            label="Role"\n            margin="dense"\n            required\n            error={!!errors.role}\n            helperText={errors.role && `${errors.role.message}`}\n          />\n        )}\n      />\n    </>\n  );\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to add a fragment tag, or else Typescript will throw an error.")),(0,r.kt)("p",null,"Now, if you save your progress and go to the browser, the company and role fields should only display when the Employed option is selected."),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-big2.gif",alt:"react Hook Form error handling"})),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"form-submission"},"Form submission"),(0,r.kt)("p",null,"Since our create component is not controlled, the way we're going to handle form submission will be different from what you might be used to."),(0,r.kt)("p",null,"Rather than adding a click event to the form's button and using it to fire a function that will handle all the submission functionalities, we're going to add an ",(0,r.kt)("inlineCode",{parentName:"p"},"onSubmit")," event listener directly on the form and pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSubmit")," method to it."),(0,r.kt)("p",null,"First off, destructure the handleSubmit method from the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook and create a ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSubmission")," function like so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'  const {\n    control,\n    handleSubmit,\n    watch,\n    formState: { errors },\n} = useForm <IFormValue>\n{\n    mode: "onChange",\n    defaultValues,\n    resolver: yupResolver(schema),\n};\n\nconst handleSubmission = (data: any) => console.log(data);\n')),(0,r.kt)("p",null,"Lastly, add an ",(0,r.kt)("inlineCode",{parentName:"p"},"onSubmit")," event handler to the form and pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSubmit")," method and ",(0,r.kt)("inlineCode",{parentName:"p"},"formSubmission")," function to it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'<form\n  onSubmit={handleSubmit(formSubmission)}\n  style={{ display: "flex", flexDirection: "column" }}\n >\n  ...\n</form>\n')),(0,r.kt)("p",null,"Now, if you save your progress and head over to the browser, you should get a logged object of the form\u2019s data in your console when you fill in the fields and submit the form."),(0,r.kt)("div",{class:"img-container"},(0,r.kt)("div",{class:"window"},(0,r.kt)("div",{class:"control red"}),(0,r.kt)("div",{class:"control orange"}),(0,r.kt)("div",{class:"control green"})),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-09-27-react-hook-form-validation/react-hook-form-console.gif",alt:"React Hook Form error handling"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"If you\u2019d like to use your form data in other parts of your refine application, for example, the List page. All you have to do is destructure the ",(0,r.kt)("inlineCode",{parentName:"p"},"onFinish")," method from the ",(0,r.kt)("inlineCode",{parentName:"p"},"useForm")," hook and pass it to the ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSubmit")," function on the form."),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"There you have it, we\u2019ve successfully built a form that can validate input values, display dynamic error messages, and render fields based on the selected select option, using refine, React Hook Form, and ",(0,r.kt)("strong",{parentName:"p"},"yup schema validator"),"."),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(c,{path:"blog-refine-react-hook-form",mdxType:"StackblitzExample"}),(0,r.kt)("hr",null))}h.isMDXComponent=!0}}]);